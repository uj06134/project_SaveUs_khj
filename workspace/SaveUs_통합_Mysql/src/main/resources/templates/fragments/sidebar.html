<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<aside class="sidebar" th:fragment="sidebar">
    <div class="sidebar-header">
        <a href="/" class="logo-link">
            <div class="web-logo"
                 th:style="'--logo-url: url(' + @{/images/icon/logo.png} + ');'"
                 aria-label="SaveUs Logo"></div>
            <span class="logo">SaveUs</span>
        </a>
    </div>

    <nav class="main-navigation">
        <ul id="sidebar-menu">
            <li class="nav-item">
                <a href="/dashboard">
                    <span class="nav-icon"><img th:src="@{/images/icon/dashboard.png}"></span>
                    <span class="nav-text">대시보드</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="/report">
                    <span class="nav-icon"><img th:src="@{/images/icon/report.png}"></span>
                    <span class="nav-text">리포트</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="/calendar">
                    <span class="nav-icon"><img th:src="@{/images/icon/calendar.png}"></span>
                    <span class="nav-text">캘린더</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="/challenges">
                    <span class="nav-icon"><img th:src="@{/images/icon/challenges.png}"></span>
                    <span class="nav-text">챌린지</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="/community">
                    <span class="nav-icon"><img th:src="@{/images/icon/community.png}"></span>
                    <span class="nav-text">커뮤니티</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="/my-page">
                    <span class="nav-icon"><img th:src="@{/images/icon/mypage.png}"></span>
                    <span class="nav-text">마이페이지</span>
                </a>
            </li>
        </ul>
    </nav>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 현재 브라우저의 주소(경로)를 가져옴
            const currentPath = window.location.pathname;

            // 모든 메뉴의 링크를 가져옴
            const menuLinks = document.querySelectorAll('#sidebar-menu .nav-item a');

            menuLinks.forEach(link => {
                const href = link.getAttribute('href');

                // 현재 주소가 링크 주소로 시작하면 'active' 클래스 추가
                // (예: /community/post/1 이어도 /community 메뉴에 불이 들어옴)
                if (currentPath.startsWith(href) && href !== '/') {
                    link.closest('.nav-item').classList.add('active');
                }
            });
        });
    </script>
</aside>
</html>